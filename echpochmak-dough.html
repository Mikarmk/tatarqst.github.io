<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠—á–ø–æ—á–º–∞–∫: –ó–∞–º–µ—à–∏–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–∞ - –¢–∞—Ç–∞—Ä—Å–∫–∏–π –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å</title>
    <link rel="stylesheet" href="../styles/main.css">
    <style>
        .kneading-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px 0;
        }

        .dough-container {
            position: relative;
            width: 300px;
            height: 300px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dough-container:hover {
            transform: scale(1.05);
        }

        .dough {
            width: 200px;
            height: 200px;
            background: linear-gradient(145deg, #fff3cd, #ffeaa7);
            border-radius: 50%;
            position: relative;
            transition: all 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .dough.kneading {
            animation: kneadingAnimation 1s ease-in-out;
            background: linear-gradient(145deg, #ffeaa7, #fdcb6e);
        }

        .dough.ready {
            background: linear-gradient(145deg, #fdcb6e, #e17055);
            box-shadow: 0 10px 30px rgba(225, 112, 85, 0.3);
        }

        @keyframes kneadingAnimation {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.1) rotate(5deg); }
            50% { transform: scale(0.9) rotate(-5deg); }
            75% { transform: scale(1.1) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }

        .kneading-instructions {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2rem;
            color: #2c3e50;
        }

        .click-counter {
            background: linear-gradient(145deg, #74b9ff, #0984e3);
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.3);
        }

        .timer-display {
            background: linear-gradient(145deg, #fd79a8, #e84393);
            color: white;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 1rem;
            margin: 10px 0;
        }

        .kneading-tips {
            background: linear-gradient(145deg, #fff3cd, #ffeaa7);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            max-width: 600px;
        }

        .tip-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 10px;
        }

        .tip-icon {
            font-size: 1.5rem;
            margin-right: 15px;
        }

        .hands-animation {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            animation: handsMoving 2s ease-in-out infinite;
        }

        @keyframes handsMoving {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        .dough-quality {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            max-width: 500px;
        }

        .quality-indicator {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
            transition: all 0.3s ease;
            flex: 1;
            margin: 0 5px;
        }

        .quality-indicator.good {
            background: linear-gradient(145deg, #d4edda, #c3e6cb);
            color: #155724;
        }

        .quality-indicator.excellent {
            background: linear-gradient(145deg, #00b894, #00cec9);
            color: white;
        }

        .rest-timer {
            background: linear-gradient(145deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }

        .rest-timer.active {
            display: block;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @media (max-width: 768px) {
            .dough-container {
                width: 250px;
                height: 250px;
            }
            
            .dough {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-screen">
            <h1 class="screen-title">ü§≤ –≠—á–ø–æ—á–º–∞–∫: –ó–∞–º–µ—à–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ</h1>
            
            <div class="character-dialog">
                <div class="character-avatar">üëµüèª</div>
                <div class="dialog-text">
                    <p><strong>–ë–∞–±—É—à–∫–∞ –§–∞—Ç–∏–º–∞:</strong></p>
                    <p id="dialog-text">–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Ö–æ—Ä–æ—à–æ –∑–∞–º–µ—Å–∏—Ç—å —Ç–µ—Å—Ç–æ. –ù–∞–∂–∏–º–∞–π –Ω–∞ —Ç–µ—Å—Ç–æ, —á—Ç–æ–±—ã –µ–≥–æ –∑–∞–º–µ—Å–∏—Ç—å. –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 20 –Ω–∞–∂–∞—Ç–∏–π –¥–ª—è —Ö–æ—Ä–æ—à–µ–≥–æ —Ç–µ—Å—Ç–∞!</p>
                </div>
            </div>

            <div class="kneading-area">
                <div class="kneading-instructions" id="instructions">
                    –ù–∞–∂–∏–º–∞–π –Ω–∞ —Ç–µ—Å—Ç–æ –¥–ª—è –∑–∞–º–µ—à–∏–≤–∞–Ω–∏—è
                </div>

                <div class="click-counter" id="click-counter">
                    –ó–∞–º–µ—Å–æ–≤: <span id="knead-count">0</span> / 20
                </div>

                <div class="dough-container" onclick="kneadDough()">
                    <div class="dough" id="dough">
                        üçû
                    </div>
                    <div class="hands-animation" id="hands" style="display: none;">ü§≤</div>
                </div>

                <div class="dough-quality">
                    <div class="quality-indicator" id="texture">
                        <div>ü§è</div>
                        <div>–¢–µ–∫—Å—Ç—É—Ä–∞</div>
                        <div>–ì—Ä—É–±–∞—è</div>
                    </div>
                    <div class="quality-indicator" id="elasticity">
                        <div>ü§∏</div>
                        <div>–≠–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç—å</div>
                        <div>–°–ª–∞–±–∞—è</div>
                    </div>
                    <div class="quality-indicator" id="smoothness">
                        <div>‚ú®</div>
                        <div>–ì–ª–∞–¥–∫–æ—Å—Ç—å</div>
                        <div>–ù–µ—Ä–æ–≤–Ω–∞—è</div>
                    </div>
                </div>

                <div class="rest-timer" id="rest-timer">
                    <h3>‚è∞ –¢–µ—Å—Ç–æ –æ—Ç–¥—ã—Ö–∞–µ—Ç</h3>
                    <p>–û—Å—Ç–∞–ª–æ—Å—å –≤—Ä–µ–º–µ–Ω–∏: <span id="timer">60</span> —Å–µ–∫—É–Ω–¥</p>
                    <p>–¢–µ—Å—Ç–æ –¥–æ–ª–∂–Ω–æ –ø–æ–¥–Ω—è—Ç—å—Å—è –∏ —Å—Ç–∞—Ç—å –±–æ–ª–µ–µ –ø—ã—à–Ω—ã–º</p>
                </div>
            </div>

            <div class="kneading-tips">
                <h3>üí° –°–µ–∫—Ä–µ—Ç—ã –∑–∞–º–µ—à–∏–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–∞</h3>
                <div class="tip-item">
                    <span class="tip-icon">üëê</span>
                    <span>–ó–∞–º–µ—à–∏–≤–∞–π—Ç–µ —Ç–µ—Å—Ç–æ —ç–Ω–µ—Ä–≥–∏—á–Ω–æ, –Ω–æ –Ω–µ –ø–µ—Ä–µ—É—Å–µ—Ä–¥—Å—Ç–≤—É–π—Ç–µ</span>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">‚è±Ô∏è</span>
                    <span>–•–æ—Ä–æ—à–µ–µ —Ç–µ—Å—Ç–æ –¥–æ–ª–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –º–∏–Ω–∏–º—É–º 1 —á–∞—Å</span>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">üå°Ô∏è</span>
                    <span>–¢–µ—Å—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç—ë–ø–ª—ã–º, –Ω–æ –Ω–µ –≥–æ—Ä—è—á–∏–º</span>
                </div>
                <div class="tip-item">
                    <span class="tip-icon">‚úã</span>
                    <span>–ì–æ—Ç–æ–≤–æ–µ —Ç–µ—Å—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–ª–∏–ø–∞—Ç—å –∫ —Ä—É–∫–∞–º</span>
                </div>
            </div>

            <div class="dialog-controls">
                <button class="back-button" onclick="goBack()">–ù–∞–∑–∞–¥</button>
                <button class="next-button" id="next-button" onclick="goToNext('../pages/echpochmak-filling.html')" style="display: none;">–ì–æ—Ç–æ–≤–∏—Ç—å –Ω–∞—á–∏–Ω–∫—É</button>
            </div>

            <div class="progress-bar">
                <div class="progress-fill" style="width: 35%;"></div>
            </div>
        </div>
    </div>
    
    <script src="../scripts/main.js"></script>
    <script>
        let kneadCount = 0;
        let isResting = false;
        let restTimer = 60;
        let timerInterval;
        
        function kneadDough() {
            if (isResting) return;
            
            kneadCount++;
            updateKneadCounter();
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∑–∞–º–µ—à–∏–≤–∞–Ω–∏—è
            const dough = document.getElementById('dough');
            const hands = document.getElementById('hands');
            
            dough.classList.add('kneading');
            hands.style.display = 'block';
            
            setTimeout(() => {
                dough.classList.remove('kneading');
                hands.style.display = 'none';
            }, 1000);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–∞
            updateDoughQuality();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–º–µ—à–∏–≤–∞–Ω–∏—è
            if (kneadCount >= 20) {
                completeDoughKneading();
            }
            
            // –ó–≤—É–∫–æ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç (–∑–∞–≥–ª—É—à–∫–∞)
            playSound('knead');
        }
        
        function updateKneadCounter() {
            document.getElementById('knead-count').textContent = kneadCount;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            const instructions = document.getElementById('instructions');
            if (kneadCount < 10) {
                instructions.textContent = '–ü—Ä–æ–¥–æ–ª–∂–∞–π –∑–∞–º–µ—à–∏–≤–∞—Ç—å! –¢–µ—Å—Ç–æ –µ—â—ë –≥—Ä—É–±–æ–µ.';
            } else if (kneadCount < 20) {
                instructions.textContent = '–•–æ—Ä–æ—à–æ! –¢–µ—Å—Ç–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —ç–ª–∞—Å—Ç–∏—á–Ω—ã–º.';
            } else {
                instructions.textContent = '–û—Ç–ª–∏—á–Ω–æ! –¢–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞.';
            }
        }
        
        function updateDoughQuality() {
            const texture = document.getElementById('texture');
            const elasticity = document.getElementById('elasticity');
            const smoothness = document.getElementById('smoothness');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—É—Ä—É
            if (kneadCount >= 7) {
                texture.classList.add('good');
                texture.querySelector('div:last-child').textContent = '–ú—è–≥–∫–∞—è';
            }
            if (kneadCount >= 15) {
                texture.classList.remove('good');
                texture.classList.add('excellent');
                texture.querySelector('div:last-child').textContent = '–ò–¥–µ–∞–ª—å–Ω–∞—è';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —ç–ª–∞—Å—Ç–∏—á–Ω–æ—Å—Ç—å
            if (kneadCount >= 10) {
                elasticity.classList.add('good');
                elasticity.querySelector('div:last-child').textContent = '–•–æ—Ä–æ—à–∞—è';
            }
            if (kneadCount >= 18) {
                elasticity.classList.remove('good');
                elasticity.classList.add('excellent');
                elasticity.querySelector('div:last-child').textContent = '–û—Ç–ª–∏—á–Ω–∞—è';
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–¥–∫–æ—Å—Ç—å
            if (kneadCount >= 12) {
                smoothness.classList.add('good');
                smoothness.querySelector('div:last-child').textContent = '–ì–ª–∞–¥–∫–∞—è';
            }
            if (kneadCount >= 20) {
                smoothness.classList.remove('good');
                smoothness.classList.add('excellent');
                smoothness.querySelector('div:last-child').textContent = '–®–µ–ª–∫–æ–≤–∏—Å—Ç–∞—è';
            }
        }
        
        function completeDoughKneading() {
            const dough = document.getElementById('dough');
            dough.classList.add('ready');
            dough.innerHTML = 'ü•ñ';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
            showSuccessMessage('–¢–µ—Å—Ç–æ –∑–∞–º–µ—à–∞–Ω–æ –∏–¥–µ–∞–ª—å–Ω–æ! –¢–µ–ø–µ—Ä—å –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å.');
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä –æ—Ç–¥—ã—Ö–∞
            startRestTimer();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–ª–æ–≥
            const dialogText = document.getElementById('dialog-text');
            dialogText.textContent = '–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ! –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–æ –¥–æ–ª–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å 1 –º–∏–Ω—É—Ç—É, —á—Ç–æ–±—ã —Å—Ç–∞—Ç—å –±–æ–ª–µ–µ –ø—ã—à–Ω—ã–º. –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —ç—Ç–æ –∑–∞–π–º—ë—Ç —á–∞—Å!';
        }
        
        function startRestTimer() {
            isResting = true;
            const restTimerDiv = document.getElementById('rest-timer');
            restTimerDiv.classList.add('active');
            
            timerInterval = setInterval(() => {
                restTimer--;
                document.getElementById('timer').textContent = restTimer;
                
                if (restTimer <= 0) {
                    clearInterval(timerInterval);
                    completeResting();
                }
            }, 1000);
        }
        
        function completeResting() {
            const restTimerDiv = document.getElementById('rest-timer');
            restTimerDiv.innerHTML = `
                <h3>‚úÖ –¢–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–æ!</h3>
                <p>–¢–µ—Å—Ç–æ –æ—Ç–¥–æ—Ö–Ω—É–ª–æ –∏ –≥–æ—Ç–æ–≤–æ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —ç—á–ø–æ—á–º–∞–∫–æ–≤</p>
            `;
            
            document.getElementById('next-button').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–ª–æ–≥
            const dialogText = document.getElementById('dialog-text');
            dialogText.textContent = '–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –¢–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–æ. –¢–µ–ø–µ—Ä—å –ø—Ä–∏–≥–æ—Ç–æ–≤–∏–º –Ω–∞—á–∏–Ω–∫—É –¥–ª—è –Ω–∞—à–∏—Ö —ç—á–ø–æ—á–º–∞–∫–æ–≤!';
            
            showSuccessMessage('–¢–µ—Å—Ç–æ –≥–æ—Ç–æ–≤–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –Ω–∞—á–∏–Ω–∫–µ.');
        }
        
        function showSuccessMessage(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = `‚úÖ ${message}`;
            successDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: linear-gradient(45deg, #00b894, #00cec9);
                color: white;
                padding: 20px 40px;
                border-radius: 15px;
                font-size: 1.2rem;
                z-index: 1000;
                animation: fadeInUp 0.5s ease-out;
            `;
            
            document.body.appendChild(successDiv);
            
            setTimeout(() => {
                successDiv.remove();
            }, 3000);
        }
        
        function playSound(soundName) {
            console.log(`–ò–≥—Ä–∞–µ—Ç –∑–≤—É–∫: ${soundName}`);
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
        }
    </script>
</body>
</html>